{% extends "layout.html" %}
{% block head %}
    {{ super() }}
{% endblock %}

{% block content %}
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static', filename='marketplace.css') }}">

<div class="main-content">
        <h1>Welcome to the Material Marketplace</h1>
        <h5>Browse through the different materials to find the right material for your bridge.</h5>
        {% if session.loggedin %}
        <div class="add_component">
            <a  href= "{{ url_for('add_component') }}">
            <input type="submit" name="edit_btn" value="Sell a loose component"rel="tooltip" class="btn btn-info">
            <i class="material-icons"></i></input></a>
        </div>
        {% endif %}
    <br/>
<table id="marketplace" class="table table-striped">
    <thead>
        <tr>
            <th>Component Material</th>
            <th>Category</th>
            <th>Weight (kg)</th>
            <th>Condition</th>
            <th>Availability</th>
            <th>Availability Date</th>
            <th>Owner/seller</th>
            <th>Location</th>
            <th>Price (â‚¬)</th>
        </tr>
    </thead>
    <tbody>
        {% for row in data %}
        <tr>
                <td>{{ row.material }}</td>
                <td>{{ row.category }}</td>
                <td>{{ row.weight }} </td>
                <td>{{ row.component_condition }}</td>
                <td>{{ row.availability }}</td>
                <td> {{ row.availability_date}}</td>
                <td>{{ row.component_owner }}</td>
                <td>{{ row.location }}</td>
                <td>{{ row.price }}</td>
                <td>
                    <a href = "{{ url_for('component_page', record_id = row.component_id) }}">
                         <input name="edit_btn" value="Show Details"rel="tooltip" class="btn btn-info">
                        <i class="material-icons"></i></input>
                    </a>
        <br>
                </td>
                {% if session.loggedin %}
                <td>
                        <a href = "{{ url_for('remove_from_marketplace', component_id = row.component_id) }}">
                         <input name="edit_btn" value="Remove From Marketplace"rel="tooltip" class="btn btn-info">
                        <i class="material-icons"></i></input>
                    </a>
                </td>
                {% endif %}
<!--                <td>-->
<!--                    <form action="/push_to_project">-->
<!--                        <SELECT name="project_id" id="project_id">-->
<!--                            {% for c in project_list %}-->
<!--                                <OPTION value={{c.project_id}}>{{c.project_id}}</option>-->
<!--                            {% endfor %}-->
<!--                            </SELECT>-->
<!--                        <br><br>-->
<!--                        <input type="submit" value="Submit">-->
<!--                    </form>-->
<!--                </td>-->

                <td>
                    {% if request.args.get('project_id') %}
                    <a href = "{{ url_for('push_to_project'
                            , project_id=request.args.get('project_id')
                            , component_id = row.component_id
                            , category=row.category
                            , material=row.material
                            , weight=row.weight
                            , component_condition=row.component_condition
                            , availability=row.availability
                            , availability_date=row.availability_date
                            , component_owner=row.component_owner
                            , location=row.location
                            , price=row.price
                            , component_description=row.component_description
                            , owner_email=row.owner_email
                            , asset_id=row.asset_id
                            ) }}">

                         <input name="edit_btn" value="Add to Project" rel="tooltip" class="btn btn-info" style="background-color:orange;border-color:orange">
                        <i class="material-icons"></i></input>
                    </a>
                    {% endif %}
                </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
    <br/>
</div>

{% endblock %}

{% block footer %}
    {{ super() }}
{% endblock %}

{% block scripts %}
{% endblock %}